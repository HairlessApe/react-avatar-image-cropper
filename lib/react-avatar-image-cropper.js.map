{"version":3,"sources":["../src/react-avatar-image-cropper.js"],"names":["SliderBtn","props","sliderW","offsetLeft","sliderStyle","Object","assign","width","maxWidth","height","backgroundColor","position","border","boxShadow","sliderBtnStyle","zIndex","top","borderRadius","left","cursor","_onMouseDown","e","document","addEventListener","_onMouseMove","_onMouseUp","preventDefault","relX","clientX","setState","resize","removeEventListener","state","findDOMNode","offsetWidth","getBoundingClientRect","AvatarImageCropper","iconStyle","display","fill","userSelect","textStyle","color","fontSize","rootStyle","textAlign","alignItems","justifyContent","overflow","inputStyle","bottom","right","opacity","previewStyle","backgroundRepeat","backgroundPosition","cropStyle","sliderConStyle","btnStyle","fontWeight","whiteSpace","verticalAlign","margin","cancelBtnStyle","borderColor","applyBtnStyle","ele","avatar2D","ratio","img2D","origin","img","onDrop","evt","fileList","target","files","acceptedFiles","file","type","indexOf","size","maxsize","push","src","window","URL","createObjectURL","Image","onload","sizeW","sizeH","Math","ceil","preview","length","x","y","clientY","relY","_resize","val","avW","avH","_apply","crop_canvas","createElement","getContext","drawImage","toBlob","blob","apply","_cancel","children","value","offsetHeight","icon","backgroundImage","backgroundSize","actions","propTypes","node","number","className","string","object","func","cancel"],"mappings":"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","file":"react-avatar-image-cropper.js","sourcesContent":["import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass SliderBtn extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            relX: 0\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.sliderW = ReactDOM.findDOMNode(this).offsetWidth;\r\n        this.offsetLeft = ReactDOM.findDOMNode(this).getBoundingClientRect().left\r\n    }\r\n\r\n    sliderW = 0;\r\n    offsetLeft = 0;\r\n\r\n    sliderStyle = Object.assign({\r\n        width: '90%',\r\n        maxWidth: '250px',\r\n        height: '7px',\r\n        backgroundColor: '#e6ecf0',\r\n        position: 'relative',\r\n        border: 0,\r\n        boxShadow: 'inset 0 0 3px rgba(0,0,0,0.15)',\r\n    })\r\n\r\n    sliderBtnStyle = Object.assign({\r\n        position: 'absolute',\r\n        zIndex: '2',\r\n        width: '16px',\r\n        height: '16px',\r\n        top: '-5px',\r\n        borderRadius: '50%',\r\n        backgroundColor: '#fff',\r\n        left: '0%',\r\n        cursor: 'pointer',\r\n        boxShadow: '0 0 3px rgba(0,0,0,0.1)',\r\n        border: '1px solid #c5c5c5'\r\n    })\r\n\r\n    _onMouseDown = (e) => {\r\n        document.addEventListener('mousemove', this._onMouseMove);\r\n        document.addEventListener('mouseup', this._onMouseUp);\r\n        e.preventDefault();\r\n    }\r\n    _onMouseMove = (e) => {\r\n        var relX = (e.clientX - this.offsetLeft) / this.sliderW * 100;\r\n        relX = relX > 100 ? 100 : relX;\r\n        relX = relX < 0 ? 0 : relX;\r\n        this.setState({\r\n            relX: relX\r\n        })\r\n        this.props.resize(relX);\r\n        e.preventDefault();\r\n    }\r\n    _onMouseUp = (e) => {\r\n        document.removeEventListener('mousemove', this._onMouseMove);\r\n        document.removeEventListener('mouseup', this._onMouseUp);\r\n        e.preventDefault();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={this.sliderStyle}>\r\n                <span style={Object.assign({},\r\n                    this.sliderBtnStyle, { left: this.state.relX + '%' })}\r\n                    onMouseDown={this._onMouseDown}></span>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass AvatarImageCropper extends Component {\r\n    static propTypes = {\r\n        /**\r\n         * Should be used to pass `icon` components.\r\n         */\r\n        icon: PropTypes.node,\r\n        /**\r\n         * Should be used to pass `actions` components.\r\n         */\r\n        actions: PropTypes.node,\r\n        /**\r\n         * Should be used to for file maxsize.\r\n         */\r\n        maxsize: PropTypes.number,\r\n        /**\r\n         * The css class name of the root element.\r\n         */\r\n        className: PropTypes.string,\r\n        /**\r\n         * Override the inline-styles of the initial icon style.\r\n         */\r\n        iconStyle: PropTypes.object,\r\n        /**\r\n         * Override the inline-styles of the initial text style.\r\n         */\r\n        textStyle: PropTypes.object,\r\n        /**\r\n         * Override the inline-styles of the root element.\r\n         */\r\n        rootStyle: PropTypes.object,\r\n        /**\r\n         * Override the inline-styles of the slider conatiner.\r\n         */\r\n        sliderConStyle: PropTypes.object,\r\n        /**\r\n        * Override the inline-styles of the cancel button.\r\n        */\r\n        cancelBtnStyle: PropTypes.object,\r\n        /**\r\n        * Override the inline-styles of the apply button.\r\n        */\r\n        applyBtnStyle: PropTypes.object,\r\n        /**\r\n         * Called when apply clicked\r\n         */\r\n        apply: PropTypes.func,\r\n        /**\r\n         * Called when canceled.\r\n         */\r\n        cancel: PropTypes.func,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            preview: null,\r\n            x: 0,\r\n            y: 0,\r\n            relX: 0,\r\n            relY: 0,\r\n            sizeW: 0,\r\n            sizeH: 0,\r\n        }\r\n    }\r\n    iconStyle = Object.assign({\r\n        display: 'inline-block',\r\n        fill: 'rgba(148,148,148,1)',\r\n        height: 32,\r\n        width: 32,\r\n        userSelect: 'none'\r\n    }, this.props.iconStyle);\r\n\r\n    textStyle = Object.assign({\r\n        color: 'rgba(148,148,148,1)',\r\n        fontSize: '18px'\r\n    }, this.props.textStyle);\r\n\r\n    rootStyle = Object.assign({\r\n        textAlign: 'center',\r\n        height: '100%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        position: 'relative',\r\n        overflow: 'hidden'\r\n    }, this.props.rootStyle);\r\n\r\n    inputStyle = Object.assign({\r\n        position: 'absolute',\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n        left: 0,\r\n        opacity: 0,\r\n        zIndex: 8,\r\n        width: '100%',\r\n        cursor: 'pointer'\r\n    });\r\n\r\n    previewStyle = Object.assign({\r\n        position: 'absolute',\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n        left: 0,\r\n        zIndex: 9,\r\n        backgroundRepeat: 'no-repeat',\r\n        cursor: 'move',\r\n        backgroundPosition: '0% 0%'\r\n    })\r\n\r\n    cropStyle = Object.assign({\r\n        height: '100%',\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: 'rgba(0,0,0,0.5)'\r\n    })\r\n\r\n    sliderConStyle = Object.assign({\r\n        position: 'absolute',\r\n        top: '100%',\r\n        right: 0,\r\n        left: 0,\r\n        zIndex: 9,\r\n        backgroundColor: '#222',\r\n        display: 'flex',\r\n        justifyContent: 'center'\r\n    }, this.props.sliderConStyle)\r\n\r\n    btnStyle = {\r\n        display: 'inline-block',\r\n        fontSize: '14px',\r\n        fontWeight: 400,\r\n        textAlign: 'center',\r\n        whiteSpace: 'nowrap',\r\n        verticalAlign: 'middle',\r\n        cursor: 'pointer',\r\n        border: '1px solid transparent',\r\n        borderRadius: '4px',\r\n        margin: '5px'\r\n    }\r\n    cancelBtnStyle = Object.assign({}, this.btnStyle, {\r\n        color: '#333',\r\n        backgroundColor: '#fff',\r\n        borderColor: '#ccc'\r\n    }, this.props.cancelBtnStyle)\r\n    applyBtnStyle = Object.assign({}, this.btnStyle,\r\n        {\r\n            color: '#fff',\r\n            backgroundColor: '#5cb85c',\r\n            borderColor: '#4cae4c'\r\n        }, this.props.applyBtnStyle)\r\n\r\n    ele = null;\r\n\r\n    avatar2D = {\r\n        width: 0,\r\n        height: 0,\r\n        ratio: 0\r\n    }\r\n    img2D = {\r\n        width: 0,\r\n        height: 0,\r\n        ratio: 0\r\n    }\r\n    origin = {\r\n        width: 0,\r\n        height: 0\r\n    }\r\n    img = null\r\n\r\n\r\n    componentDidMount() {\r\n        this.ele = ReactDOM.findDOMNode(this);\r\n        this.avatar2D.width = this.ele.offsetWidth;\r\n        this.avatar2D.height = this.ele.offsetHeight;\r\n    }\r\n\r\n    onDrop = (evt) => {\r\n        var fileList = evt.target.files\r\n        var acceptedFiles = [];\r\n        for (let file of fileList) {\r\n            if ((file.type.indexOf('png') >= 0 || file.type.indexOf('jpg') >= 0 || file.type.indexOf('jpeg') >= 0) && file.size < this.props.maxsize\r\n                ? this.props.maxsize\r\n                : 1024 * 1024 * 2) {\r\n                acceptedFiles.push(file);\r\n                var src = window\r\n                    .URL\r\n                    .createObjectURL(file);\r\n                var img = new Image();\r\n                img.src = src;\r\n                img.onload = () => {\r\n                    this.img = img;\r\n                    this.img2D.width = img.width;\r\n                    this.img2D.height = img.height;\r\n                    this.img2D.ratio = img.width / img.height;\r\n                    var sizeW = this.img2D.ratio >= 1 ? this.avatar2D.height * this.img2D.ratio : this.avatar2D.width;\r\n                    sizeW = sizeW < this.avatar2D.width ? this.avatar2D.width : sizeW\r\n                    var sizeH = sizeW / this.img2D.ratio;\r\n                    this.setState({\r\n                        sizeW: Math.ceil(sizeW),\r\n                        sizeH: sizeH,\r\n\r\n                    })\r\n                    this.origin = {\r\n                        width: sizeW,\r\n                        height: sizeH\r\n                    }\r\n                };\r\n\r\n                file.preview = src;\r\n            }\r\n        }\r\n\r\n        if (acceptedFiles.length) {\r\n            this.setState({ preview: acceptedFiles[0].preview })\r\n\r\n            if (this.props.onDrop) {\r\n                this\r\n                    .props\r\n                    .onDrop(acceptedFiles[0]);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    _onMouseDown = (e) => {\r\n        this.setState({\r\n            x: e.clientX - this.state.relX,\r\n            y: e.clientY - this.state.relY\r\n        })\r\n        document.addEventListener('mousemove', this._onMouseMove);\r\n        document.addEventListener('mouseup', this._onMouseUp);\r\n        e.preventDefault();\r\n    }\r\n    _onMouseMove = (e) => {\r\n        var relX = this.state.x - e.clientX;\r\n        var relY = this.state.y - e.clientY;\r\n        if (relX < this.state.sizeW - this.avatar2D.width && relX > 0) {\r\n            this.setState({\r\n                relX: -relX\r\n            })\r\n        }\r\n        if (relY < this.state.sizeH - this.avatar2D.height && relY > 0) {\r\n            this.setState({\r\n                relY: -relY\r\n            })\r\n        }\r\n\r\n        e.preventDefault();\r\n    }\r\n    _onMouseUp = (e) => {\r\n        document.removeEventListener('mousemove', this._onMouseMove);\r\n        document.removeEventListener('mouseup', this._onMouseUp);\r\n        e.preventDefault();\r\n    }\r\n    _resize = (val) => {\r\n        var sizeW = this.origin.width * (1 + val / 50);\r\n        var sizeH = this.origin.height * (1 + val / 50);\r\n        var avW = sizeW - this.avatar2D.width;\r\n        var avH = sizeH - this.avatar2D.height;\r\n        var relX = -this.state.relX > avW ? -avW : this.state.relX\r\n        var relY = -this.state.relY > avH ? -avH : this.state.relY\r\n        this.setState({\r\n            sizeH: sizeH,\r\n            sizeW: sizeW,\r\n            relX: relX,\r\n            relY: relY\r\n        });\r\n    }\r\n    _apply = () => {\r\n        var crop_canvas = document.createElement('canvas');\r\n        crop_canvas.width = this.avatar2D.width;\r\n        crop_canvas.height = this.avatar2D.height;\r\n        var ratio = this.state.sizeW / this.img2D.width;\r\n        crop_canvas.getContext('2d').drawImage(this.img, -this.state.relX / ratio, -this.state.relY / ratio, this.img2D.width, this.img2D.height, 0, 0, this.state.sizeW, this.state.sizeH);\r\n        crop_canvas.toBlob((blob) => {\r\n            this.props.apply(blob);\r\n        });\r\n\r\n    }\r\n    _cancel = () => {\r\n        this.ele.children[0].children[1].value = \"\"\r\n        this.setState({\r\n            preview: null\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { relX, relY, sizeW, sizeH } = this.state;\r\n\r\n        return (\r\n            <avatar-image style={{ height: '100%', display: 'block', position: 'relative' }}>\r\n                <div style={this.rootStyle}>\r\n                    <div>\r\n                        {this.props.icon\r\n                            ? this.props.icon\r\n                            :\r\n                            (\r\n                                <svg viewBox=\"0 0 24 24\" style={this.iconStyle}>\r\n                                    <circle cx=\"12\" cy=\"12\" r=\"3.2\"></circle>\r\n                                    <path\r\n                                        d=\"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\"></path>\r\n                                </svg>\r\n                            )\r\n                        }\r\n                        <p style={this.textStyle}>Upload photo</p>\r\n                    </div>\r\n                    <input\r\n                        style={this.inputStyle}\r\n                        type='file'\r\n                        accept='images/*'\r\n                        onChange={(e) => {\r\n                            this.onDrop(e)\r\n                        }} />\r\n                    {\r\n                        this.state.preview &&\r\n                        (\r\n                            <div>\r\n                                <div\r\n                                    onMouseDown={this._onMouseDown}\r\n                                    style={Object.assign({}, this.previewStyle, {\r\n                                        backgroundImage: 'url(' + this.state.preview + ')',\r\n                                        backgroundSize: sizeW + 'px ' + sizeH + 'px',\r\n                                        backgroundPosition: '' + relX + 'px ' + relY + 'px'\r\n                                    })}>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        )\r\n                    }\r\n\r\n                </div>\r\n                {\r\n                    this.state.preview &&\r\n                    (\r\n                        <div style={this.sliderConStyle}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', maxWidth: '600px', width: '100%' }}>\r\n                                <div style={{ height: '20px', margin: '5px', display: 'flex', alignItems: 'center', justifyContent: 'center', width: '100%' }}>\r\n                                    <SliderBtn resize={this._resize} />\r\n                                </div>\r\n                                <div>\r\n                                    {\r\n                                        this.props.actions ?\r\n                                            this.props.actions\r\n                                            :\r\n                                            (\r\n                                                <div style={{ display: 'flex' }}>\r\n                                                    <button style={this.cancelBtnStyle} onClick={this._cancel}>\r\n                                                        <svg fill=\"#000000\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                                            <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\r\n                                                            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n                                                        </svg>\r\n                                                    </button>\r\n                                                    <button style={this.applyBtnStyle} onClick={this._apply}>\r\n                                                        <svg fill=\"#ffffff\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                                            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n                                                            <path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\" />\r\n                                                        </svg>\r\n                                                    </button>\r\n                                                </div>\r\n\r\n                                            )\r\n                                    }\r\n\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    )\r\n                }\r\n            </avatar-image>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default AvatarImageCropper;\r\n"]}