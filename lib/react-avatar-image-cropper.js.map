{"version":3,"sources":["../src/react-avatar-image-cropper.js"],"names":["SliderBtn","props","ifMobile","test","navigator","userAgent","sliderW","offsetLeft","sliderStyle","Object","assign","width","maxWidth","height","backgroundColor","position","border","boxShadow","sliderBtnStyle","zIndex","top","borderRadius","left","cursor","_onStart","e","document","addEventListener","_onMove","_onUp","preventDefault","x","touches","clientX","relX","setState","resize","removeEventListener","state","ele","findDOMNode","offsetWidth","getBoundingClientRect","children","AvatarImageCropper","color","isBack","iconStyle","display","fill","userSelect","textStyle","fontSize","rootStyle","textAlign","alignItems","justifyContent","overflow","inputStyle","bottom","right","opacity","previewStyle","backgroundRepeat","backgroundPosition","cropStyle","avatarStyle","sliderConStyle","btnStyle","fontWeight","whiteSpace","verticalAlign","margin","cancelBtnStyle","borderColor","applyBtnStyle","filename","avatar2D","ratio","img2D","origin","img","onDrop","evt","fileList","target","files","acceptedFiles","maxsize","file","ifImage","type","indexOf","size","push","src","window","URL","createObjectURL","Image","onload","sizeW","sizeH","Math","ceil","errorMsg","preview","errorHandler","length","name","_onMouseDown","y","clientY","relY","_onMouseUp","_resize","val","avW","avH","_apply","crop_canvas","createElement","getContext","drawImage","toBlob","blob","value","apply","_cancel","cancel","offsetHeight","actions","map","key","res","cloneElement","onClick","className","icon","text","backgroundImage","backgroundSize","propTypes","bool","node","string","array","number","object","func"],"mappings":"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","file":"react-avatar-image-cropper.js","sourcesContent":["import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass SliderBtn extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            relX: 0\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        var ele = ReactDOM.findDOMNode(this);\r\n        this.sliderW = ele.offsetWidth;\r\n        this.offsetLeft = ele.getBoundingClientRect().left\r\n        if (this.ifMobile) {\r\n            ele.children[0].addEventListener('touchstart', this._onStart)\r\n        } else {\r\n            ele.children[0].addEventListener('mousedown', this._onStart)\r\n        }\r\n    }\r\n\r\n    ifMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n    sliderW = 0;\r\n    offsetLeft = 0;\r\n\r\n    sliderStyle = Object.assign({\r\n        width: '90%',\r\n        maxWidth: '250px',\r\n        height: '7px',\r\n        backgroundColor: '#e6ecf0',\r\n        position: 'relative',\r\n        border: 0,\r\n        boxShadow: 'inset 0 0 3px rgba(0,0,0,0.15)',\r\n    })\r\n\r\n    sliderBtnStyle = Object.assign({\r\n        position: 'absolute',\r\n        zIndex: '2',\r\n        width: '16px',\r\n        height: '16px',\r\n        top: '-5px',\r\n        borderRadius: '50%',\r\n        backgroundColor: '#fff',\r\n        left: '0%',\r\n        cursor: 'pointer',\r\n        boxShadow: '0 0 3px rgba(0,0,0,0.1)',\r\n        border: '1px solid #c5c5c5'\r\n    })\r\n\r\n    _onStart = (e) => {\r\n        if (this.ifMobile) {\r\n            document.addEventListener('touchmove', this._onMove);\r\n            document.addEventListener('touchend', this._onUp);\r\n        } else {\r\n            document.addEventListener('mousemove', this._onMove);\r\n            document.addEventListener('mouseup', this._onUp);\r\n        }\r\n\r\n        e.preventDefault();\r\n    }\r\n    _onMove = (e) => {\r\n        var x = this.ifMobile ? e.touches[0].clientX : e.clientX;\r\n        var relX = (x - this.offsetLeft) / this.sliderW * 100;\r\n        relX = relX > 100 ? 100 : relX;\r\n        relX = relX < 0 ? 0 : relX;\r\n        this.setState({\r\n            relX: relX\r\n        })\r\n        this.props.resize(relX);\r\n        e.preventDefault();\r\n    }\r\n    _onUp = (e) => {\r\n        if (this.ifMobile) {\r\n            document.removeEventListener('touchmove', this._onMove);\r\n            document.removeEventListener('touchend', this._onUp);\r\n        } else {\r\n            document.removeEventListener('mousemove', this._onMove);\r\n            document.removeEventListener('mouseup', this._onUp);\r\n        }\r\n        e.preventDefault();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={this.sliderStyle}>\r\n                <span style={Object.assign({},\r\n                    this.sliderBtnStyle, { left: this.state.relX + '%' })}\r\n                ></span>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass AvatarImageCropper extends Component {\r\n    static propTypes = {\r\n        /**\r\n         * Should be used to pass `icon` components.\r\n         */\r\n        isBack: PropTypes.bool,\r\n        /**\r\n         * Should be used to pass `icon` components.\r\n         */\r\n        icon: PropTypes.node,\r\n        /**\r\n        * Should be used to pass text.\r\n        */\r\n        text: PropTypes.string,\r\n        /**\r\n         * Should be used to pass `actions` array of components.\r\n         */\r\n        actions: PropTypes.array,\r\n        /**\r\n         * Should be used to for file maxsize.\r\n         */\r\n        maxsize: PropTypes.number,\r\n        /**\r\n         * The css class name of the root element.\r\n         */\r\n        className: PropTypes.string,\r\n        /**\r\n         * Override the inline-styles of the initial icon style.\r\n         */\r\n        iconStyle: PropTypes.object,\r\n        /**\r\n         * Override the inline-styles of the initial text style.\r\n         */\r\n        textStyle: PropTypes.object,\r\n        /**\r\n         * Override the inline-styles of the root element.\r\n         */\r\n        rootStyle: PropTypes.object,\r\n        /**\r\n         * Override the inline-styles of the slider conatiner.\r\n         */\r\n        sliderConStyle: PropTypes.object,\r\n        /**\r\n        * Override the inline-styles of the cancel button.\r\n        */\r\n        cancelBtnStyle: PropTypes.object,\r\n        /**\r\n        * Override the inline-styles of the apply button.\r\n        */\r\n        applyBtnStyle: PropTypes.object,\r\n        /**\r\n         * Called when apply clicked\r\n         */\r\n        apply: PropTypes.func,\r\n        /**\r\n         * Called when canceled.\r\n         */\r\n        cancel: PropTypes.func,\r\n        /**\r\n         * error with file.\r\n         */\r\n        errorHandler: PropTypes.func,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            preview: null,\r\n            x: 0,\r\n            y: 0,\r\n            relX: 0,\r\n            relY: 0,\r\n            sizeW: 0,\r\n            sizeH: 0,\r\n            errorMsg: ''\r\n        }\r\n    }\r\n    color = this.props.isBack ? '#ffffff' : 'rgba(148,148,148,1)';\r\n\r\n    ifMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n\r\n    iconStyle = Object.assign({\r\n        display: 'inline-block',\r\n        color: this.color,\r\n        fill: 'currentcolor',\r\n        height: 32,\r\n        width: 32,\r\n        userSelect: 'none'\r\n    }, this.props.iconStyle);\r\n\r\n    textStyle = Object.assign({\r\n        color: this.color,\r\n        fontSize: '18px'\r\n    }, this.props.textStyle);\r\n\r\n    rootStyle = Object.assign({\r\n        textAlign: 'center',\r\n        height: '100%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        position: 'relative',\r\n        overflow: 'hidden'\r\n    }, this.props.rootStyle);\r\n\r\n    inputStyle = Object.assign({\r\n        position: 'absolute',\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n        left: 0,\r\n        opacity: 0,\r\n        zIndex: 8,\r\n        width: '100%',\r\n        cursor: 'pointer'\r\n    });\r\n\r\n    previewStyle = Object.assign({\r\n        position: 'absolute',\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n        left: 0,\r\n        zIndex: 9,\r\n        backgroundRepeat: 'no-repeat',\r\n        cursor: 'move',\r\n        backgroundPosition: '0% 0%'\r\n    })\r\n\r\n    cropStyle = Object.assign({\r\n        height: '100%',\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: 'rgba(0,0,0,0.5)'\r\n    })\r\n\r\n    avatarStyle = Object.assign({\r\n        height: '100%',\r\n        display: 'block',\r\n        position: 'relative',\r\n        backgroundColor: this.props.isBack ? 'rgba(0,0,0,0.4)' : 'transparent'\r\n    }, this.props.avatarStyle)\r\n\r\n    sliderConStyle = Object.assign({\r\n        position: 'absolute',\r\n        top: '100%',\r\n        right: 0,\r\n        left: 0,\r\n        zIndex: 9,\r\n        backgroundColor: '#222',\r\n        display: 'flex',\r\n        justifyContent: 'center'\r\n    }, this.props.sliderConStyle)\r\n\r\n    btnStyle = {\r\n        display: 'inline-block',\r\n        fontSize: '14px',\r\n        fontWeight: 400,\r\n        textAlign: 'center',\r\n        whiteSpace: 'nowrap',\r\n        verticalAlign: 'middle',\r\n        cursor: 'pointer',\r\n        border: '1px solid transparent',\r\n        borderRadius: '4px',\r\n        margin: '5px'\r\n    }\r\n    cancelBtnStyle = Object.assign({}, this.btnStyle, {\r\n        color: '#333',\r\n        backgroundColor: '#fff',\r\n        borderColor: '#ccc'\r\n    }, this.props.cancelBtnStyle)\r\n    applyBtnStyle = Object.assign({}, this.btnStyle,\r\n        {\r\n            color: '#fff',\r\n            backgroundColor: '#5cb85c',\r\n            borderColor: '#4cae4c'\r\n        }, this.props.applyBtnStyle)\r\n\r\n    ele = null;\r\n    filename = '';\r\n    avatar2D = {\r\n        width: 0,\r\n        height: 0,\r\n        ratio: 0\r\n    }\r\n    img2D = {\r\n        width: 0,\r\n        height: 0,\r\n        ratio: 0\r\n    }\r\n    origin = {\r\n        width: 0,\r\n        height: 0\r\n    }\r\n    img = null\r\n\r\n\r\n    componentDidMount() {\r\n        this.ele = ReactDOM.findDOMNode(this);\r\n        this.avatar2D.width = this.ele.offsetWidth;\r\n        this.avatar2D.height = this.ele.offsetHeight;\r\n    }\r\n\r\n    onDrop = (evt) => {\r\n        var fileList = evt.target.files\r\n        var acceptedFiles = [];\r\n        var maxsize = this.props.maxsize\r\n            ? this.props.maxsize\r\n            : 1024 * 1024 * 2;\r\n        var file = fileList[0];\r\n\r\n        var ifImage = file.type.indexOf('png') >= 0 || file.type.indexOf('jpg') >= 0 || file.type.indexOf('jpeg') >= 0;\r\n\r\n        if (ifImage && file.size <= maxsize) {\r\n            acceptedFiles.push(file);\r\n            var src = window.URL.createObjectURL(file);\r\n            var img = new Image();\r\n            img.src = src;\r\n            img.onload = () => {\r\n                this.img = img;\r\n                this.img2D.width = img.width;\r\n                this.img2D.height = img.height;\r\n                this.img2D.ratio = img.width / img.height;\r\n                var sizeW = this.img2D.ratio >= 1 ? this.avatar2D.height * this.img2D.ratio : this.avatar2D.width;\r\n                sizeW = sizeW < this.avatar2D.width ? this.avatar2D.width : sizeW\r\n                var sizeH = sizeW / this.img2D.ratio;\r\n                this.setState({\r\n                    sizeW: Math.ceil(sizeW),\r\n                    sizeH: sizeH,\r\n                    errorMsg: ''\r\n                })\r\n                this.origin = {\r\n                    width: sizeW,\r\n                    height: sizeH\r\n                }\r\n            };\r\n\r\n            file.preview = src;\r\n        } else if (!ifImage) {\r\n            if (this.props.errorHandler) {\r\n                this.props.errorHandler('not_image')\r\n                return;\r\n            } else {\r\n                this.setState({\r\n                    errorMsg: 'Please upload png/jpg/jpeg image'\r\n                })\r\n            }\r\n        } else if (file.size > maxsize) {\r\n            if (this.props.errorHandler) {\r\n                this.props.errorHandler('maxsize')\r\n                return;\r\n            } else {\r\n                this.setState({\r\n                    errorMsg: 'The size of image is too large'\r\n                })\r\n            }\r\n        }\r\n\r\n        if (acceptedFiles.length) {\r\n            this.filename = acceptedFiles[0].name;\r\n            this.setState({ preview: acceptedFiles[0].preview })\r\n\r\n            if (this.props.onDrop) {\r\n                this\r\n                    .props\r\n                    .onDrop(acceptedFiles[0]);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    _onMouseDown = (e) => {\r\n        if (this.ifMobile) {\r\n            this.setState({\r\n                x: e.touches[0].clientX - this.state.relX,\r\n                y: e.touches[0].clientY - this.state.relY\r\n            })\r\n            document.addEventListener('touchmove', this._onMove);\r\n            document.addEventListener('touchend', this._onMouseUp);\r\n        } else {\r\n            this.setState({\r\n                x: e.clientX - this.state.relX,\r\n                y: e.clientY - this.state.relY\r\n            })\r\n            document.addEventListener('mousemove', this._onMove);\r\n            document.addEventListener('mouseup', this._onMouseUp);\r\n        }\r\n\r\n        e.preventDefault();\r\n    }\r\n    _onMove = (e) => {\r\n        var x = this.ifMobile ? e.touches[0].clientX : e.clientX\r\n        var y = this.ifMobile ? e.touches[0].clientY : e.clientY\r\n        var relX = this.state.x - x;\r\n        var relY = this.state.y - y;\r\n        if (relX < this.state.sizeW - this.avatar2D.width && relX > 0) {\r\n            this.setState({\r\n                relX: -relX\r\n            })\r\n        }\r\n        if (relY < this.state.sizeH - this.avatar2D.height && relY > 0) {\r\n            this.setState({\r\n                relY: -relY\r\n            })\r\n        }\r\n\r\n        e.preventDefault();\r\n    }\r\n    _onMouseUp = (e) => {\r\n        if (this.ifMobile) {\r\n            document.removeEventListener('touchmove', this._onMove);\r\n            document.removeEventListener('touchend', this._onMouseUp);\r\n        } else {\r\n            document.removeEventListener('mousemove', this._onMove);\r\n            document.removeEventListener('mouseup', this._onMouseUp);\r\n        }\r\n\r\n        e.preventDefault();\r\n    }\r\n    _resize = (val) => {\r\n        var sizeW = this.origin.width * (1 + val / 50);\r\n        var sizeH = this.origin.height * (1 + val / 50);\r\n        var avW = sizeW - this.avatar2D.width;\r\n        var avH = sizeH - this.avatar2D.height;\r\n        var relX = -this.state.relX > avW ? -avW : this.state.relX\r\n        var relY = -this.state.relY > avH ? -avH : this.state.relY\r\n        this.setState({\r\n            sizeH: sizeH,\r\n            sizeW: sizeW,\r\n            relX: relX,\r\n            relY: relY\r\n        });\r\n    }\r\n    _apply = () => {\r\n        var crop_canvas = document.createElement('canvas');\r\n        crop_canvas.width = this.avatar2D.width;\r\n        crop_canvas.height = this.avatar2D.height;\r\n        var ratio = this.state.sizeW / this.img2D.width;\r\n        crop_canvas.getContext('2d').drawImage(this.img, -this.state.relX / ratio, -this.state.relY / ratio, this.img2D.width, this.img2D.height, 0, 0, this.state.sizeW, this.state.sizeH);\r\n        crop_canvas.toBlob((blob) => {\r\n            this.ele.children[0].children[1].value = \"\"\r\n            this.setState({\r\n                preview: null\r\n            })\r\n            blob.name = this.filename;\r\n            this.props.apply(blob);\r\n        });\r\n\r\n    }\r\n    _cancel = () => {\r\n        this.ele.children[0].children[1].value = \"\"\r\n        this.setState({\r\n            preview: null\r\n        })\r\n        if (this.props.cancel) {\r\n            this.props.cancel();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { relX, relY, sizeW, sizeH } = this.state;\r\n        var actions = this.props.actions ?\r\n            this.props.actions.map((ele, key) => {\r\n                var res = null;\r\n                switch (key) {\r\n                    case 0:\r\n                        res = React.cloneElement(\r\n                            ele,\r\n                            { onClick: this._cancel }\r\n                        );\r\n                        break;\r\n                    case 1:\r\n                        res = React.cloneElement(\r\n                            ele,\r\n                            { onClick: this._apply }\r\n                        );\r\n                    default:\r\n                        break;\r\n                }\r\n                return res\r\n            })\r\n            :\r\n            null\r\n        return (\r\n            <avatar-image class={this.props.className}\r\n                style={this.avatarStyle}>\r\n                <div style={this.rootStyle}>\r\n                    <div>\r\n                        {this.props.icon\r\n                            ? this.props.icon\r\n                            :\r\n                            (\r\n                                <svg viewBox=\"0 0 24 24\" style={this.iconStyle}>\r\n                                    <circle cx=\"12\" cy=\"12\" r=\"3.2\"></circle>\r\n                                    <path\r\n                                        d=\"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\"></path>\r\n                                </svg>\r\n                            )\r\n                        }\r\n                        <p style={this.textStyle}>{this.props.text ? this.props.text : 'Upload photo'}</p>\r\n                        <p style={{ color: 'red' }}>{this.state.errorMsg}</p>\r\n                    </div>\r\n                    <input\r\n                        style={this.inputStyle}\r\n                        type='file'\r\n                        accept='image/*'\r\n                        onChange={(e) => {\r\n                            this.onDrop(e)\r\n                        }} />\r\n                    {\r\n                        this.state.preview &&\r\n                        (\r\n                            <div>\r\n                                <div\r\n                                    onMouseDown={this._onMouseDown}\r\n                                    onTouchStart={this._onMouseDown}\r\n                                    style={Object.assign({}, this.previewStyle, {\r\n                                        backgroundImage: 'url(' + this.state.preview + ')',\r\n                                        backgroundSize: sizeW + 'px ' + sizeH + 'px',\r\n                                        backgroundPosition: '' + relX + 'px ' + relY + 'px'\r\n                                    })}>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        )\r\n                    }\r\n\r\n                </div>\r\n                {\r\n                    this.state.preview &&\r\n                    (\r\n                        <div style={this.sliderConStyle}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', maxWidth: '600px', width: '100%' }}>\r\n                                <div style={{ height: '20px', margin: '5px', display: 'flex', alignItems: 'center', justifyContent: 'center', width: '100%' }}>\r\n                                    <SliderBtn resize={this._resize} />\r\n                                </div>\r\n                                <div name='action-con' style={{ display: 'flex' }}>\r\n                                    {\r\n                                        actions ?\r\n                                            actions\r\n                                            :\r\n                                            [\r\n                                                <button style={this.cancelBtnStyle} key={0} onClick={this._cancel}>\r\n                                                    <svg fill=\"#000000\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                                        <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\r\n                                                        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n                                                    </svg>\r\n                                                </button>,\r\n                                                <button style={this.applyBtnStyle} key={1} onClick={this._apply}>\r\n                                                    <svg fill=\"#ffffff\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                                        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n                                                        <path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\" />\r\n                                                    </svg>\r\n                                                </button>\r\n                                            ]\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    )\r\n                }\r\n            </avatar-image>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default AvatarImageCropper;\r\n"]}